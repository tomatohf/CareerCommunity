<% page_title = "我的求职目标" %>
<% community_page_title(page_title) %>

<div class="float_r">
	<% round_corner_div :border_color => "#F0E0CF", :bg_color => "#FFF5E8", :style => "width: 320px;" do %>
		<div class="action_bar">
			<a href="/job_targets/new">
				<img src="/images/job_targets/new_job_target_small.gif" border="0" style="margin-right: 5px;" />添加求职目标</a>
			
			<a href="/job_targets">
				<img src="/images/job_targets/determine_job_target_small.gif" border="0" style="margin-right: 5px;" />还没有目标?帮我确定目标</a>
		</div>
	<% end %>
</div>
	
<div class="blog_container" id="job_target_list_page">
	<img class="float_l" style="margin: 0px 10px;" src="/images/job_targets/steward_small.png" border="0" alt="求职管家" />
	<h2><%= page_title %></h2>
	
	<br />
	<br />
	
	<div id="loading_container" class="community_block" style="padding-left: 50px;">
		<img src="/images/loading_small.gif" />
		&nbsp;
		正在加载 求职目标 ...
	</div>
	
	
	
	<link rel="stylesheet" href="/lib/ext/resources/css/ext-all.css" type="text/css" media="screen"></link>
	<link rel="stylesheet" href="/lib/ext/resources/css/xtheme-gray.css" type="text/css" media="screen"></link>

	<script language="JavaScript" type="text/javascript" src="/lib/ext/adapter/ext/ext-base.js"></script>
	<script language="JavaScript" type="text/javascript" src="/lib/ext/ext-all.js"></script>

	<script language="JavaScript" type="text/javascript" src="/lib/ext/build/widgets/grid/GridFilters.js"></script>
	<script language="JavaScript" type="text/javascript" src="/lib/ext/build/widgets/grid/filter/Filter.js"></script>
	<script language="JavaScript" type="text/javascript" src="/lib/ext/build/widgets/grid/filter/NumericFilter.js"></script>
	<script language="JavaScript" type="text/javascript" src="/lib/ext/build/widgets/grid/filter/StringFilter.js"></script>
	<script language="JavaScript" type="text/javascript" src="/lib/ext/build/widgets/grid/filter/DateFilter.js"></script>

	<script language="JavaScript" type="text/javascript" src="/lib/ext/build/widgets/menu/RangeMenu.js"></script>
	<script language="JavaScript" type="text/javascript" src="/lib/ext/build/widgets/menu/EditableItem.js"></script>

	<script language="JavaScript" type="text/javascript" src="/lib/ext/build/locale/ext-lang-zh_CN.js"></script>

	<script language="JavaScript" type="text/javascript" src="/javascripts/job_target_table.js"></script>



	<script language="JavaScript" type="text/javascript">
	
		var form_authenticity_token = encodeURIComponent("<%= form_authenticity_token %>");
		
		var current_user_id = <%= session[:account_id] %>;
		
		var target_count = <%= @targets.size %>;
		
		var system_processes = [];
		var account_processes = [];
		
		<% @system_processes.each do |process| %>
			system_processes.push(
				{
					id: "<%= process.id %>",
					name: "<%= h(process.name) %>"
				}
			);
		<% end %>
		<% @account_processes.each do |process| %>
			account_processes.push(
				{
					id: "<%= process.id %>",
					name: "<%= h(process.name) %>"
				}
			);
		<% end %>
		
		
		var system_statuses = [];
		var account_statuses = [];
		
		<% @system_statuses.each do |status| %>
			system_statuses.push(
				{
					id: "<%= status.id %>",
					name: "<%= h(status.name) %>",
					color: "<%= status.color %>"
				}
			);
		<% end %>
		<% @account_statuses.each do |status| %>
			account_statuses.push(
				{
					id: "<%= status.id %>",
					name: "<%= h(status.name) %>",
					color: "<%= status.color %>"
				}
			);
		<% end %>
		

		Ext.onReady(
			function() {
				Ext.get("table_container").show(true);
				create_table_grid();

				Ext.get("loading_container").remove();
			}
		);

	</script>
	
	
	
	<div id="table_container" class="community_block" style="display: none;">
		
		<table id="job_targets_container" cellpadding="0" cellspacing="0" border="0" class="main_part_w">
			<thead>
				<tr>
					<th>公司</th>
					<th>职位</th>
					<th>添加日期</th>
					<th>步骤</th>
					<td>目标编号</td>
				</tr>
			</thead>
			
			<tbody>
				<%= render :partial => "target", :collection => @targets %>
			</tbody>
		</table>
		
		
		
		<div class="community_block align_c">
			<h1>Put Status Legend Here !!!</h1>
		</div>
		
	</div>
	
</div>


